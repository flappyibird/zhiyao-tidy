<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">


    <title>incubator details</title>

    <!-- Bootstrap core CSS -->
    <link href="/static/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="/static/css/incubator/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/static/css/all.css" rel="stylesheet">
    <link href="/static/css/incubator.css" rel="stylesheet">
    <link href="/static/css/incubator/navbar.css" rel="stylesheet">
    <script src="http://cdn.hcharts.cn/jquery/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="http://cdn.hcharts.cn/highcharts/highcharts.js" type="text/javascript"></script>
    <script src="http://cdn.hcharts.cn/highcharts/exporting.js" type="text/javascript"></script>
    <noscript>
        &lt;link rel="stylesheet" href="/static/css/incubator/noscript.css"/&gt;
    </noscript>

</head>
<!-- NAVBAR
================================================== -->

<body>

<script type="text/javascript">
    $(function() {
        var xaixs={{ Mtimes|safe }};
        console.log("测试time");
        {#console.log({{ Mtimes }});#}
        $('#container').highcharts({

    title: {
        text: '温度'
    },
            xAxis:{
        categories: xaixs
            },
    yAxis: {
        title: {
            text: 'temperature'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    series: [{
        name: 'Temp',
        data: {{ Mtemperatures }}
    }],

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

});
    });


</script>
<script type="text/javascript">
    $(function() {
        var xaixs={{ Mtimes|safe }};
        console.log("测试time");
        {#console.log({{ Mtimes }});#}
        $('#container2').highcharts({

    title: {
        text: '湿度'
    },
            xAxis:{
        categories: xaixs
            },
    yAxis: {
        title: {
            text: 'humidity'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    series: [{
        name: 'Hum',
        data: {{ Mhumiditys }}
    }],

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

});
    });


</script>
<script type="text/javascript">
    $(function() {
        var xaixs={{ Mtimes|safe }};
        console.log("测试time");
        {#console.log({{ Mtimes }});#}
        $('#container3').highcharts({

    title: {
        text: '光照'
    },
            xAxis:{
        categories: xaixs
            },
    yAxis: {
        title: {
            text: 'lightIntensity'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    series: [{
        name: 'light',
        data: {{ MlightIntensitys }}
    }],

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

});
    });


</script>
<script type="text/javascript">
    $(function() {
        var xaixs={{ Mtimes|safe }};
        console.log("测试time");
        {#console.log({{ Mtimes }});#}
        $('#container4').highcharts({

    title: {
        text: '湿度'
    },
            xAxis:{
        categories: xaixs
            },
    yAxis: {
        title: {
            text: 'pressure'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    series: [{
        name: 'Pressure',
        data: {{ Mpressures }}
    }],

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

});
    });


</script>

<div id="top-container">
    <!--
        作者：1758522370@qq.com
        时间：2018-10-06
        描述：标头
    -->
    <h2 style="color: transparent;&#10;       background-color : black;&#10;       text-shadow : rgba(255,255,255,0.5) 0 5px 6px, rgba(255,255,255,0.2) 1px 3px 3px;&#10;       -webkit-background-clip : text;">
        智药 zhiyao.com</h2>

</div>
<!--<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">-->
<nav class="navbar navbar-light " role="navigation" style="background-color: #e3f2fd;">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="#"> 智药 </a>
        </div>
        <div>
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="#">商城</a>
                </li>
                <li>
                    <a href="#"></a>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" href="#" data-toggle="dropdown">
                        智库 <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="#">jmeter</a>
                        </li>
                        <li>
                            <a href="#">EJB</a>
                        </li>
                        <li>
                            <a href="#">Jasper Report</a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">分离的链接</a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">另一个分离的链接</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <ul class="nav navbar-nav navbar-right">
            {% if request.session.is_login %}
            <p>欢迎你，{{ request.session.userphone }}</p>
            {% endif %}
            <li>
                <a href="#"><span class="glyphicon glyphicon-user"></span> 注册</a>
            </li>
            <li>
                <a href="#"><span class="glyphicon glyphicon-log-in"></span> 登录</a>
            </li>
        </ul>
        <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
                <input class="form-control" type="text" placeholder="Search">
            </div>
            <button class="btn btn-default" type="submit">搜索</button>
        </form>
    </div>
</nav>
<div id="left-container">
    <div id="left-navbar">
        <ul class="nav nav-pills nav-stacked">
            <li class="word active">
                <button class="btn btn-link" type="submit"><span class="glyphicon glyphicon-th-large"></span>培养箱
                </button>
            </li>
            <li class="word">
                <form action="/getbbs/" method="get">
                    <button class="btn btn-link" type="submit"><span class="glyphicon glyphicon-comment"></span>论坛&nbsp;&nbsp;
                    </button>
                </form>
            </li>
            <li class="word">
                <form action="/my/" method="get">
                    <button class="btn btn-link" type="submit"><span class="glyphicon glyphicon-user"></span>我的&nbsp;&nbsp;
                    </button>
                </form>
            </li>
        </ul>
    </div>
</div>
{% if IisSucceed and MisSucceed %}
<div id="right-container">
    <nav id="nav" style="width:auto;">
        <ul>
            <li><a class="active" href="#viewChart">查看</a></li>
            <li><a href="#settingProperties">修改</a></li>
        </ul>
    </nav>

    <div id="main">
        <div class="container marketing " id="viewChart">

            <!--箱内属性展示  简单表示 -->
            <div class="row">
                <div class="col-lg-1 "  >
                    <img style="width:400px" src="/image" id="incubator_img" onload="refreshImg()">
                    <script>
            function refreshImg(){
                setInterval(a,5000);
            }
            function a(){
                document.getElementById('incubator_img').src="/image"+Math.random();
            }


                    </script>
                    <h2>远程查看</h2>
                </div>
            </div>
            <div class="row ">
                <div class="col-lg-3 ">
                    <div id="container"></div>
                    <p>当前温度：{{ Mtemperature }}</p>
                    <p>初始温度：{{ Itemperature }}</p>
                    <p>建议温度：</p>
                </div>
                <div class="col-lg-3 ">
                    <div id="container2"></div>
                    <p>当前湿度：{{ Mhumidity }}</p>
                    <p>初始湿度：{{ Ihumidity }}</p>
                    <p>建议湿度：</p>
                </div>
                <div class="col-lg-3 ">
                    <div id="container3"></div>
                    <p>当前光照：{{ Mlightlntensity }}</p>
                    <p>初始光照：{{ Mlightlntensity }}</p>
                    <p>建议光照：</p>
                </div>
                <div class="col-lg-3 ">
                    <div id="container4"></div>
                    <p>当前压强：{{ Mpressure }}</p>
                    <p>初始压强：{{ Mpressure }}</p>
                    <p>建议压强：</p>
                </div>



                <!-- /.col-lg-3 -->
            </div>

            <!-- /.row -->
        </div>
        <div id="settingProperties">
            <h2>培养箱属性表单</h2>

            <form action="/changeEnvironment/{{ request.session.incubatorid }}/" method="post">
                {% csrf_token %}
                <div class="table-responsive ">
                    <table class="table table-striped table-sm ">
                        <thead>
                        <tr>
                            <th>属性</th>
                            <th>当前值</th>
                            <th>初始值</th>
                            <th>建议值</th>
                            <th>自定义</th>
                        </tr>
                        </thead>
                        <tbody>

                        <tr>
                            <td>光照强度</td>
                            <td>{{ MlightIntensity }}</td>
                            <td>{{ IlightIntensity }}</td>
                            <td>（建议光照）</td>
                            <td>
                                <input name="led_ctl" class="form-control " id="pMedicine "
                                       style="margin-top=align-content: 20px; " type="text ">
                            </td>
                        </tr>

                        <tr>
                            <td>温度</td>
                            <td>{{ Mtemperature }}</td>
                            <td>{{ Itemperature }}</td>
                            <td>（建议温度）</td>
                            <td>
                                <input name="tem_ctl" class="form-control " id="pMedicine "
                                       style="margin-top=align-content: 20px; " type="text ">
                            </td>
                        </tr>
                        <tr>
                            <td>湿度</td>
                            <td>{{ Mhumidity }}</td>
                            <td>{{ Ihumidity }}</td>
                            <td>（建议湿度）</td>
                            <td>
                                <input name="hum_ctl" class="form-control " id="pMedicine "
                                       style="margin-top=align-content: 20px; " type="text ">
                            </td>
                        </tr>
                        <tr>
                            <td>压强</td>
                            <td>{{ Mpressure }}</td>
                            <td>{{ Ipressure }}</td>
                            <td>（建议压强）</td>
                            <td>
                                <input name="pre_ctl" class="form-control " id="pMedicine "
                                       style="margin-top=align-content: 20px; " type="text ">
                            </td>
                        </tr>
                        <tr>
                            <td>其他</td>
                            <td>222</td>
                            <td>212</td>
                            <td>223</td>
                            <td>
                                <input class="form-control " id="pMedicine " style="margin-top=align-content: 20px; "
                                       type="text ">
                            </td>
                        </tr>

                        </tbody>
                    </table>
                </div>
                <button class="btn btn-primary btn-lg" type="submit">提交修改</button>

            </form>

        </div>
    </div>
</div>
{% endif %}
{% if not IisSucceed %}
<div class="alert alert-warning">
    <a class="close" href="#" data-dismiss="alert">
        ×
    </a>
    <strong>抱歉</strong>这里出了点问题
</div>
{% endif %}

<!--right-container-->
<footer class="footer">
    <div class="container">
        <p class="text-muted">Place sticky footer content here.</p>
    </div>
</footer>


<script>
    // 当网页向下滑动 20px 出现"返回顶部" 按钮
    window.onscroll = function () {
        scrollFunction()
    };

    function scrollFunction() {
        console.log(121);
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("returnTop").style.display = "block";
        } else {
            document.getElementById("returnTop").style.display = "none";
        }
    }

    // 点击按钮，返回顶部
    function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }

</script>


</body>
</html>